
# ローカル環境でのビルドと実行

作られたワールドのテスト・デバッグを行うには、ローカル環境にてワールドのビルドと実行を行う必要があります。

## ビルドを行う方法 / ビルドのオプションについて

Vket Cloud SDKでシーンをビルドするには、[必要コンポーネント](WorldBasicComponents.md)を配置したことを確認し、Vket Cloud SDK > Build And Run からビルドを実行してください。  
  
![BuildAndRun](img/BuildAndRun.jpg)  

!!! note question "ビルドが出来ない場合"
    さまざまな要因でビルドに失敗している可能性があります。エラー事例をまとめた[トラブルシューティング](../troubleshooting/BuildError.md)をご覧ください。

!!! caution "エラーが起きた場合は"
    HeliScriptがワールドロード中あるいは呼び出しによって実行された際にエラーが起きた場合はデバッグログとブラウザのコンソールに表示されます。<br>
    初期状態ではデバッグログは非表示になっているため、表示するには[デバッグモード](../WorldEditingTips/DebugMode.md)を有効にしてください。<br>
    なお、ワールドロード時にデバッグログは非表示になるため、ロードが停止した際は[ブラウザのコンソール](../troubleshooting/BuildError.md#_4)をご確認ください。

!!! caution "ログインやAPI連携はローカルビルドでは動作しない"
    ローカルでビルドを実行した際は以下警告が表示されますが、ローカル環境では、ログイン機能とAPI連携機能は動作しないのが仕様です。<br>
    
    ![BuildAndRun_1](img/BuildAndRun_1.jpg)

    以下使用できない新規登録機能およびログイン機能です。<br>

    ![BuildAndRun_2](img/BuildAndRun_2.jpg)

    APIとの接続が必要な機能の場合は、ワールドをアップロードして確認してください。


!!! note "ビルドオプションについて"
    Vket Cloud SDK > Settingsより設定ウィンドウを開き、「Build」タブを選択するとビルド時のテクスチャの自動圧縮などのオプションを設定出来ます。<br>
    詳細は[ビルド時のオプション](../WorldEditingTips/BuildOptions.md)をご参照ください。

ビルドが成功したら、自動的にブラウザに遷移します。シーンの内容が反映されているかテストしてください。

![BuildAndRun](img/buildsuccess.jpg)  

!!! note tip "キャッシュクリアについて"
    Vket Cloud SDKのビルド時に発生するキャッシュは、基本的にはビルド毎に上書きされるため消去は不要です。<br>
    SDKのバージョンアップ直後などにおいて稀にキャッシュが原因のビルドエラーが発生するため、その際は以下より手動でのキャッシュクリアをお試しください。<br>
    - Vket Cloud SDK > キャッシュクリア<br>
    また、 - Vket Cloud SDK > Build Option > Auto Clear Cache にチェックを入れることでビルド毎にキャッシュクリアするように設定出来ますが、通常のビルド時には有効にしなくても問題ございません。

## 「ビルドと実行」で起きること

 Build and Runを押すと、[VKC Item Field](../VKCComponents/VKCItemField.md)コンポーネントが付いたオブジェクトとそのすべての子オブジェクトが.heoファイルに変換されます。「.heo」はVketCloudの描画エンジンで使われている専用の3Dフォーマットです。  

ビルドされたファイルは`[プロジェクト名]\release\data`フォルダにコピーされます。これにより、3Dワールドをブラウザで動かすのに必要なアセットがすべてこのフォルダに入ります。

### releaseフォルダの中身

|  場所  |  ファイル  |  説明  |
| ---- | ---- | ---- |
|  \release  |  main.html  |  このhtmlをブラウザで開いて3Dワールドを起動  |
|  \release\data\Field\[ワールド名]\ [オブジェクト名]  |  [オブジェクト名].heo  |  ワールドの3Dオブジェクト  |
|  \release\data\Scene  |  [ワールド名].json  |  ワールド構成を記述したシーンデータ  |

なお、releaseフォルダの中身を直接書き換えたものをアップロードする行為は**ライセンス規約で固くお断りしています**。あくまで、デバッグ手段の一つとしてご利用ください。
